[gd_resource type="BehaviorTree" load_steps=25 format=3 uid="uid://coci7s5xjvf0n"]

[ext_resource type="Script" path="res://ai/tasks/frost_phase_transition.gd" id="1_6l0r0"]
[ext_resource type="Script" path="res://ai/tasks/check_health.gd" id="1_xvjmj"]
[ext_resource type="Script" path="res://ai/tasks/detect_targets.gd" id="2_wbc0o"]
[ext_resource type="Script" path="res://ai/tasks/find_target.gd" id="3_u70tl"]
[ext_resource type="Script" path="res://ai/tasks/persistent_chase.gd" id="4_lbrgp"]
[ext_resource type="Script" path="res://ai/tasks/frost_attack.gd" id="5_khduj"]
[ext_resource type="Script" path="res://ai/tasks/move_to_target.gd" id="6_ahpkm"]
[ext_resource type="Script" path="res://ai/tasks/move_to_position.gd" id="8_vwvtx"]
[ext_resource type="Script" path="res://ai/tasks/random_move_pos.gd" id="9_rnvxs"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_fbir5"]

[sub_resource type="BTAction" id="BTAction_skld6"]
script = ExtResource("1_xvjmj")
health_threshold = 0.5

[sub_resource type="BTAction" id="BTAction_su3gy"]
script = ExtResource("1_6l0r0")

[sub_resource type="BTSequence" id="BTSequence_1n1mv"]
custom_name = "Phase Transition"
children = [SubResource("BTAction_skld6"), SubResource("BTAction_su3gy")]

[sub_resource type="BTAction" id="BTAction_0n31l"]
script = ExtResource("2_wbc0o")
target_type = "Player"
target_var = &"target"
targets_var = &"known_targets"
detection_radius = 300.0

[sub_resource type="BTAction" id="BTAction_e1v14"]
script = ExtResource("3_u70tl")
group = &"Player"
target_var = &"target"

[sub_resource type="BTAction" id="BTAction_3kxgr"]
script = ExtResource("4_lbrgp")
target_var = &"target"
max_search_attempts = 5
search_interval = 0.5

[sub_resource type="BTAction" id="BTAction_r6xt1"]
script = ExtResource("6_ahpkm")
target_var = &"target"
speed = 100.0
tolerance = 10.0
min_distance = 20.0

[sub_resource type="BTAction" id="BTAction_rbdg0"]
script = ExtResource("5_khduj")
target_var = &"target"
attack_range = 60.0
frost_damage = 15.0
attack_cooldown = 1.5
frost_effect_duration = 3.0

[sub_resource type="BTSequence" id="BTSequence_rhfr5"]
custom_name = "Attack"
children = [SubResource("BTAction_rbdg0")]

[sub_resource type="BTSequence" id="BTSequence_v4bf5"]
custom_name = "Combat"
children = [SubResource("BTAction_0n31l"), SubResource("BTAction_e1v14"), SubResource("BTAction_3kxgr"), SubResource("BTAction_r6xt1"), SubResource("BTSequence_rhfr5")]

[sub_resource type="BTAction" id="BTAction_random_pos"]
script = ExtResource("9_rnvxs")
min_range = 40.0
max_range = 100.0
position_var = &"patrol_pos"
direction_var = &"dir"

[sub_resource type="BTAction" id="BTAction_move_to_pos"]
script = ExtResource("8_vwvtx")
target_pos = "patrol_pos"
direction = "dir"
speed = 80.0
tolerance = 10.0

[sub_resource type="BTSequence" id="BTSequence_patrol"]
custom_name = "Patrol"
children = [SubResource("BTAction_random_pos"), SubResource("BTAction_move_to_pos")]

[sub_resource type="BTSelector" id="BTSelector_u558i"]
custom_name = "FrostGuardian"
children = [SubResource("BTSequence_1n1mv"), SubResource("BTSequence_v4bf5"), SubResource("BTSequence_patrol")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_fbir5")
root_task = SubResource("BTSelector_u558i")
